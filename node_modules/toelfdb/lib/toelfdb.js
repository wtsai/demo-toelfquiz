var DBHouse = require('dbhouse');
var BSON = require('mongodb').BSONNative;
var DBserver = require('./dbserver');
 
var toefl = module.exports = function() {
	this.settings = {
        "database": {
            "name": "toefl_test",
            "host": "localhost",
            "port": 27017
        }
    };
	this.database = new DBHouse;
	this.DBserver = new DBserver(this);
};

toefl.prototype.set = function(key, value) {
	this.settings[key] = value;
};
toefl.prototype.init = function(callback) {
	var self = this;

	// Initializing Database
	this.database.connect('mongodb', { host: 'localhost', port: 27017 }, function() {
		if (callback)
			callback(null);
		
		//console.log("(lib)ToelfDB: db.js is connected");
		//console.log(this.database);

		// Initiailizing collections
		var db = new DBHouse.Database(this.database);
	});	
};